<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>แบบประเมินความเสี่ยง</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <form id="assessmentForm">

    <!-- หน้า Intro -->
    <div class="page active" id="introPage">
      <img src="เครื่องมือ.png" alt="เครื่องมือ" class="intro-img">
      <div class="nav-buttons">
        <button type="button" class="start-btn" onclick="startAssessment()">เริ่มการประเมิน</button>
      </div>
    </div>

    <!-- หน้า 1: ข้อ 1 -->
    <div class="page" id="page1">
      <h2>ข้อ 1: ประเมินส่วนบน (คอ ไหล่ แขน มือ และหลังส่วนบน)</h2>
      <div id="upperPostureOptions" class="image-grid"></div>
      <div class="nav-buttons">
        <button type="button" onclick="nextUpperTimePage()">ถัดไป</button>
      </div>
    </div>

    <!-- หน้า 2: ข้อ 2 -->
    <div class="page" id="page2"></div>

    <!-- หน้า 3: ข้อ 3 -->
    <div class="page" id="page3">
      <h2>ข้อ 3: ประเมินส่วนล่าง (หลังส่วนล่าง ขา และเท้า)</h2>
      <div id="lowerPostureOptions" class="image-grid"></div>
      <div class="nav-buttons">
        <button type="button" onclick="prevPage()">ย้อนกลับ</button>
        <button type="button" onclick="nextLowerTimePage()">ถัดไป</button>
      </div>
    </div>

    <!-- หน้า 4: ข้อ 4 -->
    <div class="page" id="page4"></div>

    <!-- หน้า 5: ข้อ 5-7 -->
    <div class="page" id="page5">
      <h2>ข้อ 5: การออกแรง</h2>
      <label><input type="radio" name="force" value="1"> น้อยกว่า 5 กิโลกรัม</label><br>
      <label><input type="radio" name="force" value="2"> 5–10 กิโลกรัม</label><br>
      <label><input type="radio" name="force" value="3"> มากกว่า 10 กิโลกรัม</label><br>

      <h2>ข้อ 6: การทำงานซ้ำ ๆ</h2>
      <label><input type="radio" name="repetition" value="1"> มากกว่า 4 ครั้งใน 1 นาที</label><br>
      <label><input type="radio" name="repetition" value="0"> น้อยกว่า 4 ครั้งใน 1 นาที</label><br>

      <h2>ข้อ 7: การบิด/หมุน</h2>
      <label><input type="radio" name="twist" value="1"> มีการบิด/หมุน ข้อมือหรือคอ</label><br>
      <label><input type="radio" name="twist" value="0"> ไม่มีการบิด/หมุน</label><br>

      <div class="nav-buttons">
        <button type="button" onclick="prevPage()">ย้อนกลับ</button>
        <button type="button" onclick="calculateResult()">ประมวลผล</button>
      </div>
    </div>

    <!-- หน้า 6: ผลลัพธ์ -->
    <div class="page" id="page6">
      <h2>ผลการประเมิน</h2>
      <p id="resultText"></p>
      <img id="resultImage" src="" alt="ผลการประเมิน">
    </div>

  </form>
  
  <!-- ตารางข้อมูล -->
<h2>ข้อมูลทั้งหมดจาก Firebase</h2>
<div id="tableContainer"></div>

<!-- กราฟ (ใช้ Chart.js) -->
<canvas id="chart" width="400" height="200"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.1.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.1.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.1.0/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDf0D2GLLDHoAVX4zq-tLuVocSmsrFhs38",
    authDomain: "fera-2215e.firebaseapp.com",
    databaseURL: "https://fera-2215e-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "fera-2215e",
    storageBucket: "fera-2215e.appspot.com",
    messagingSenderId: "810225127285",
    appId: "1:810225127285:web:fa87166d4e3e4770670d3c"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const auth = firebase.auth();

  // ล็อกอินแบบ Anonymous
  auth.signInAnonymously().catch(console.error);
</script>
  
  <script src="script.js"></script>
</body>
</html>
